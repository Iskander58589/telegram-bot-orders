# –û—Ç–ª–∞–¥–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –ß—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–∞–∫?

–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∏–µ–Ω—Ç—É –∫–æ–≥–¥–∞ –≤—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –Ω–∞ –∑–∞–∫–∞–∑ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç–µ, –ø–æ–º–æ–≥—É—Ç —ç—Ç–∏ —à–∞–≥–∏:

## –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å –ª–æ–≥–∞–º–∏

```bash
python bot.py
```

–°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ —ç—Ç–æ–º.

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–ª—Å—è

–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–∫–∞–∑, –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[ADMIN_HANDLER] === –ü–û–õ–£–ß–ï–ù–û –°–û–û–ë–©–ï–ù–ò–ï –í –ê–î–ú–ò–ù-–ß–ê–¢–ï ===
[ADMIN_HANDLER] chat_id: -1003898978688
```

(—ç—Ç–æ –Ω–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∞–¥–º–∏–Ω-—á–∞—Ç–∞)

## –®–∞–≥ 3: –û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–∫–∞–∑

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-—á–∞—Ç –≤ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑ –±–æ—Ç–∞
3. **–û–ß–ï–ù–¨ –í–ê–ñ–ù–û:** –ù–∞–∂–º–∏—Ç–µ **Reply** (–æ—Ç–≤–µ—Ç–∏—Ç—å) –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª –ò–õ–ò —Ç–µ–∫—Å—Ç

## –®–∞–≥ 4: –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

–ö–æ–≥–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –æ—Ç–≤–µ—Ç, –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

### –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
[ADMIN_HANDLER] === –ü–û–õ–£–ß–ï–ù–û –°–û–û–ë–©–ï–ù–ò–ï –í –ê–î–ú–ò–ù-–ß–ê–¢–ï ===
[ADMIN_HANDLER] chat_id: -1003898978688
[ADMIN_HANDLER] Match: True
[ADMIN_HANDLER] –ù–∞–π–¥–µ–Ω reply_to_message
[ADMIN_HANDLER] –¢–µ–∫—Å—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤):
[ADMIN_HANDLER] üîî **–ù–û–í–´–ô –ó–ê–ö–ê–ó**

üë§ –ö–ª–∏–µ–Ω—Ç: @testuser
...
[ADMIN_HANDLER] –ù–∞–π–¥–µ–Ω –∑–∞–∫–∞–∑ ID: 1001
[ADMIN_HANDLER] –û—Ç–ø—Ä–∞–≤–ª—è—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: 123456789
[ADMIN_HANDLER] –û—Ç–ø—Ä–∞–≤–ª—è—é –¥–æ–∫—É–º–µ–Ω—Ç / —Ç–µ–∫—Å—Ç / —Ñ–æ—Ç–æ
[ADMIN_HANDLER] –û—Ç–ø—Ä–∞–≤–ª—è—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç
[ADMIN_HANDLER] === –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û ===
```

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### –ü—Ä–æ–±–ª–µ–º–∞: "Match: False"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ADMIN_CHAT_ID
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ config.py —á—Ç–æ `ADMIN_CHAT_ID = -1003898978688` (–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—à ID)

#### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç reply_to_message, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
**–ü—Ä–∏—á–∏–Ω–∞:** –í—ã –Ω–µ –Ω–∞–∂–∞–ª–∏ Reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–∂–º–∏—Ç–µ Reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ —Å –∑–∞–∫–∞–∑–æ–º –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –æ—Ç–≤–µ—Ç

#### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–∞—Ç—Ç–µ—Ä–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–ó–∞–∫–∞–∑ ID: `#XXXX`"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ë–û–¢–∞, –∞ –Ω–µ –Ω–∞ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### –ü—Ä–æ–±–ª–µ–º–∞: "–ó–∞–∫–∞–∑ #1001 –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ storage"
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è –∏ –ø–æ—Ç–µ—Ä—è–ª –∑–∞–∫–∞–∑—ã (–æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏)
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ë–î

#### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞: Bot was blocked by the user"
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–µ–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:** –ù–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–µ–ª–∞—Ç—å, –ø—É—Å—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç

#### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞: user_id not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ order['user_id'] —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
python test_logic.py
```

–≠—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ ID
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ (OrderService)

## –°–∏–≥–Ω–∞–ª—ã —É—Å–ø–µ—Ö–∞

–ï—Å–ª–∏ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç–µ –ø–æ—è–≤–∏–ª—Å—è –æ—Ç–≤–µ—Ç –±–æ—Ç–∞:
```
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç—É (@testuser)!
```

–¢–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:
1. ‚úÖ –ó–∞–∫–∞–∑ –Ω–∞–π–¥–µ–Ω
2. ‚úÖ User ID –Ω–∞–π–¥–µ–Ω
3. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É (–∏–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –µ—Å–ª–∏ –≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç ‚ùå)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –∑–∞–∫–∞–∑—ã —Ö—Ä–∞–Ω—è—Ç—Å—è, –¥–æ–±–∞–≤—å—Ç–µ –≤ handlers.py –∫–æ–º–∞–Ω–¥—É:

```python
@router.message(Command("debug_orders"))
async def debug_orders(message: Message):
    from order_service import OrderService
    await message.answer(f"Orders in storage: {OrderService.orders_storage}")
```

–ó–∞—Ç–µ–º –≤ –±–æ—Ç–µ –Ω–∞–ø–∏—à–∏—Ç–µ `/debug_orders` –∏ —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –∑–∞–∫–∞–∑—ã.
