# ๐ฏ ะะะ ะะกะ ะะะะะขะะะข - ะะะะกะขะะ ะะะชะฏะกะะะะะ

## ๐ง ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ
โ  ะขะฒะพะน ะะ        โ
โ  (ัะฐะทัะฐะฑะพัะบะฐ)   โ
โโโโโโโโโโฌโโโโโโโโโ
         โ git push (ะทะฐะณััะถะฐะตัั ะบะพะด)
         โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  GitHub             โ
โ  (ััะฐะฝะธะปะธัะต ะบะพะดะฐ)   โ
โ  + Secrets (ัะพะบะตะฝั) โ
โโโโโโโโโโฌโโโโโโโโโโโโโ
         โ git clone (ัะบะฐัะธะฒะฐะตัั ะบะพะด)
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Hetzner ัะตัะฒะตั        โ
โ  (24/7 ะทะฐะฟััะตะฝ ะฑะพั)    โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโ
         โ API ะทะฐะฟัะพัั (ะพัะฟัะฐะฒะปัะตั ัะพะพะฑัะตะฝะธั)
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Telegram API          โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโ
         โ ะกะพะพะฑัะตะฝะธั
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะปัะทะพะฒะฐัะตะปะธ Telegram โ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฆ ะงะขะ ะะฃะะ ะะะะข

### 1๏ธโฃ **ะขะฒะพะน ะะ โ GitHub**
```
git push origin main
```
**ะงัะพ ะพัะฟัะฐะฒะปัะตััั:**
- bot.py, config.py ะธ ะฒัะต .py ัะฐะนะปั โ
- requirements.txt โ
- .gitignore โ

**ะงัะพ ะะ ะพัะฟัะฐะฒะปัะตััั (ะทะฐัะธัะตะฝะพ .gitignore):**
- .env (ั ัะพะบะตะฝะพะผ) โ
- __pycache__/ โ
- .venv/ โ

---

### 2๏ธโฃ **GitHub โ Hetzner ัะตัะฒะตั**
```bash
git clone https://github.com/YOUR_USERNAME/telegram-bot-orders.git
```

**ะงัะพ ัะบะฐัะธะฒะฐะตััั:**
- ะะตัั ะบะพะด ะธะท GitHub โ
- ะัะต ัะฐะนะปั ะธััะพะดะฝัะต โ

**ะงัะพ ะฟัะธัะพะดะธั ะพัะดะตะปัะฝะพ (ะธะท GitHub Secrets):**
- BOT_TOKEN (ะฟะตัะตะดะฐะตััั ะฒ .env ะฝะฐ ัะตัะฒะตัะต)
- ADMIN_CHAT_ID (ะฟะตัะตะดะฐะตััั ะฒ .env ะฝะฐ ัะตัะฒะตัะต)

---

### 3๏ธโฃ **Hetzner ัะตัะฒะตั โ Telegram**
```python
# bot.py ะทะฐะฟััะบะฐะตััั ะฒ systemd
await bot.send_message(chat_id=123, text="ะัะธะฒะตั!")
```

ะะพั ะฟะพััะพัะฝะฝะพ ัะปััะฐะตั Telegram API ะธ ะพัะฟัะฐะฒะปัะตั ัะพะพะฑัะตะฝะธั.

---

## ๐ ะะะะะะะกะะะกะขะฌ ะขะะะะะะ

### โ ะะะะะะะะะฌะะ (ะพะฟะฐัะฝะพ!):
```python
# config.py
BOT_TOKEN = "8283115795:AAHRJHjwXivexbPDH-HZg3ydCahBHlzROyM"  # ะะะะะ ะะกะะ!
```
ะัะปะธ ะบัะพ-ัะพ ะฝะฐะนะดะตั GitHub ัะตะฟะพ โ ัะบัะฐะดะตั ัะพะบะตะฝ โ ะฑัะดะตั ัะฟัะฐะฒะปััั ะฑะพัะพะผ!

### โ ะะะะะะะฌะะ (ะฑะตะทะพะฟะฐัะฝะพ):
```python
# config.py
import os
BOT_TOKEN = os.getenv("BOT_TOKEN")  # ะะตัะตะผ ะธะท ะฟะตัะตะผะตะฝะฝะพะน ะพะบััะถะตะฝะธั
```

```bash
# ะะฐ ัะตัะฒะตัะต ัะพะทะดะฐะตะผ .env ัะฐะนะป (ะะ ะฒ GitHub!)
BOT_TOKEN=8283115795:AAHRJHjwXivexbPDH-HZg3ydCahBHlzROyM
ADMIN_CHAT_ID=-1003898978688
```

```bash
# ะะฐัะธัะฐะตะผ ัะฐะนะป ะพั ะดััะณะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
chmod 600 .env  # ะะพะถะตั ัะธัะฐัั ัะพะปัะบะพ ะฒะปะฐะดะตะปะตั
```

---

## ๐๏ธ ะกะขะะฃะะขะฃะะ ะะะะะ ะะ ะกะะะะะะ

```
/home/telegram-bot/            โ ะะปะฐะฒะฝะฐั ะดะธัะตะบัะพัะธั ะฑะพัะฐ
โโโ bot.py                      โ ะะปะฐะฒะฝัะน ัะฐะนะป (ะทะฐะฟััะบะฐะตััั systemd)
โโโ config.py                   โ ะะพะฝัะธะณััะฐัะธั (ัะธัะฐะตั ะธะท .env)
โโโ order_service.py            โ ะะพะณะธะบะฐ ะทะฐะบะฐะทะพะฒ
โโโ handlers.py                 โ ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด
โโโ order_handlers.py           โ ะะฑัะฐะฑะพััะธะบะธ ะทะฐะบะฐะทะพะฒ (FSM)
โโโ keyboards.py                โ ะะฝะพะฟะบะธ
โโโ states.py                   โ FSM ัะพััะพัะฝะธั
โโโ utils.py                    โ ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
โโโ requirements.txt            โ ะะฐะฒะธัะธะผะพััะธ Python
โโโ .env                        โ ะกะตะบัะตัั (ะะ ะฒ GitHub!)
โโโ .gitignore                  โ ะงัะพ ะฝะต ะบะพะผะผะธัะธัั
โโโ venv/                       โ ะะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต Python
    โโโ bin/python3            โ Python ะธะฝัะตัะฟัะตัะฐัะพั
```

---

## โ๏ธ ะะะ ะะะะะขะะะข SYSTEMD ะกะะะะะก

### ะคะฐะนะป: `/etc/systemd/system/telegram-bot.service`

```ini
[Unit]
Description=Telegram Orders Bot    โ ะะฐะทะฒะฐะฝะธะต ัะตัะฒะธัะฐ
After=network.target               โ ะะฐะฟััะบะฐะตััั ะฟะพัะปะต ะธะฝัะตัะฝะตัะฐ

[Service]
Type=simple                        โ ะัะพััะพะน ัะตัะฒะธั (ะฝะต ัะฟะตัะธะฐะปัะฝัะน)
User=root                          โ ะั ะบะฐะบะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟััะบะฐัั
WorkingDirectory=/home/telegram-bot โ ะะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั
Environment="PATH=/home/telegram-bot/venv/bin"  โ ะััั ะบ Python
ExecStart=/home/telegram-bot/venv/bin/python3 /home/telegram-bot/bot.py
Restart=always                     โ ะะตัะตะทะฐะฟััะบะฐัั ะฟัะธ ะฟะฐะดะตะฝะธะธ
RestartSec=10                      โ ะงะตัะตะท 10 ัะตะบัะฝะด

[Install]
WantedBy=multi-user.target         โ ะะฐะฟััะบะฐัั ะฟัะธ ะทะฐะณััะทะบะต ัะธััะตะผั
```

### ะะพะผะฐะฝะดั ัะฟัะฐะฒะปะตะฝะธั:

```bash
# ะะฐะฟัััะธัั ะฑะพัะฐ
systemctl start telegram-bot

# ะััะฐะฝะพะฒะธัั
systemctl stop telegram-bot

# ะะตัะตะทะฐะฟัััะธัั
systemctl restart telegram-bot

# ะะบะปััะธัั ะฐะฒัะพะทะฐะฟััะบ ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต
systemctl enable telegram-bot

# ะัะบะปััะธัั ะฐะฒัะพะทะฐะฟััะบ
systemctl disable telegram-bot

# ะัะพะฒะตัะธัั ััะฐััั
systemctl status telegram-bot

# ะะพัะผะพััะตัั ะปะพะณะธ
journalctl -u telegram-bot -f
```

---

## ๐ ะฆะะะ ะะะะะ ะะะะะะ

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฟะธัะตั /start
                โ
2. ะะพั ะพัะฟัะฐะฒะปัะตั ะณะปะฐะฒะฝะพะต ะผะตะฝั (handlers.py)
                โ
3. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะพะฒัะน ะทะฐะบะฐะท"
                โ
4. FSM ะฟะตัะตัะพะดะธั ะฒ ัะพััะพัะฝะธะต (states.py)
                โ
5. ะะพั ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต (order_handlers.py)
                โ
6. OrderService ัะฐัััะธััะฒะฐะตั ัะตะฝั (order_service.py)
                โ
7. ะะฐะบะฐะท ะพัะฟัะฐะฒะปัะตััั ะฒ ะฐะดะผะธะฝ-ัะฐั (Hetzner โ Telegram)
                โ
8. ะะดะผะธะฝ ะพัะฒะตัะฐะตั ะฒ ะณััะฟะฟะต
                โ
9. ะัะฒะตั ะธะดะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ
```

---

## ๐ ะะะะะขะะะะะ ะะะขะ

### ะัะพะฒะตัะธัั ะถะธะฒะพะน ะปะธ ะฑะพั:

```bash
# ะะฐ ัะตัะฒะตัะต
systemctl status telegram-bot
```

ะัะธ: `active (running)` - ะทะฝะฐัะธั ัะฐะฑะพัะฐะตั โ

### ะะพัะผะพััะตัั ะพัะธะฑะบะธ:

```bash
# ะะพัะปะตะดะฝะธะต 50 ัััะพะบ ะปะพะณะพะฒ
journalctl -u telegram-bot -n 50

# ะะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
journalctl -u telegram-bot -f

# ะะพะณะธ ะทะฐ ะฟะพัะปะตะดะฝะธะน ัะฐั
journalctl -u telegram-bot --since "1 hour ago"
```

### ะัะปะธ ะฑะพั ัะฟะฐะป:

```bash
# Systemd ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะทะฐะฟัััะธั ัะตัะตะท 10 ัะตะบ
# ะะปะธ ะฟะตัะตะทะฐะฟัััะธ ะฒัััะฝัั:
systemctl restart telegram-bot

# ะัะพะฒะตัั ัะพะบะตะฝ ะฒ .env
cat /home/telegram-bot/.env
```

---

## ๐ ะะะะฆะะกะก ะะะะะะะะะะฏ ะะะะ

### ะะฐัะธะฐะฝั 1: ะะฐ ะะ โ Push โ ะะฐ ัะตัะฒะตัะต Pull

```bash
# ะะฐ ะะ (ะปะพะบะฐะปัะฝะพ)
git add .
git commit -m "Fix bug in order processing"
git push origin main

# ะะฐ ัะตัะฒะตัะต
cd /home/telegram-bot
git pull origin main

# ะะตัะตะทะฐะฟัััะธ ะฑะพัะฐ
systemctl restart telegram-bot
```

### ะะฐัะธะฐะฝั 2: GitHub Actions (ะฐะฒัะพะผะฐัะธัะตัะบะธะน)

ะะพัะปะต `git push` ะฝะฐ GitHub:
- GitHub ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟััะบะฐะตั ัะบัะธะฟั
- ะกะบัะธะฟั ะฟะพะดะบะปััะฐะตััั ะบ Hetzner
- ะกะบัะธะฟั ะดะตะปะฐะตั `git pull` ะธ ะฟะตัะตะทะฐะฟััะบะฐะตั ะฑะพัะฐ

(ะะฐัััะฐะธะฒะฐะตััั ะฒ `.github/workflows/deploy.yml`)

---

## ๐ฏ ะะขะะะ: ะะฐะบ ััะพ ะฒัั ะฒะทะฐะธะผะพะดะตะนััะฒัะตั

1. **ะะฐะทัะฐะฑะพัะบะฐ** โ ะฟะธัะตัั ะบะพะด ะฝะฐ ะะ
2. **GitHub** โ ะฒัะบะปะฐะดัะฒะฐะตัั ัะตัะตะท `git push`
3. **Hetzner** โ ัะบะฐัะธะฒะฐะตั ัะตัะตะท `git clone/pull`
4. **systemd** โ ะทะฐะฟััะบะฐะตั bot.py 24/7
5. **Telegram** โ ะฑะพั ะพัะฟัะฐะฒะปัะตั/ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธั
6. **ะะพะปัะทะพะฒะฐัะตะปะธ** โ ะธัะฟะพะปัะทััั ะฑะพัะฐ

**ะัะต ัะพะบะตะฝั ัะบัััั ะฒ .env ะธ GitHub Secrets** ๐

---

## โ ะะพัะพะฒะพ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั!

ะััั ะฒะพะฟัะพัั? ะกะฟัะฐัะธะฒะฐะน ะฟัะพ ะบะพะฝะบัะตัะฝัะน ัะฐะณ!
